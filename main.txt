import requests
import csv 

file_path = 'migration_list.csv'
column_name = 'Domain'

# Reading the CSV file
def read_csv(file_path, column_name):
    with open(file_path, mode='r', encoding='utf-8') as file:
        reader = csv.DictReader(file)
        return [row[column_name] for row in reader]

# Function to check if a domain is reachable
def is_domain_reachable(domain):
    try:
        response = requests.get(f'http://{domain}', timeout=5)
        return response.status_code == 200
    except requests.RequestException:
        return False
    
# Check if all domains are reachable
def check_domains(data):
    unreachable_domains = []
    for domain in data:
        if not is_domain_reachable(domain):
            unreachable_domains.append(domain)
    return unreachable_domains




def main():
    # Check if the CSV file exists and is readable
    try:
        with open(file_path, 'r') as file:
            pass
    except FileNotFoundError:
        print(f"File {file_path} not found.")
        return
    except Exception as e:
        print(f"Error reading file {file_path}: {e}")
        return

    # Read the CSV file and check domains
    try:
        data = read_csv(file_path, column_name)
    except KeyError:
        print(f"Column {column_name} not found in the CSV file.")
        return
    except Exception as e:
        print(f"Error reading column {column_name}: {e}")
        return
    
    data = data[:13]
    unreachable_domains = check_domains(data)
    if unreachable_domains:
        print("Unreachable domains:")
        for domain in unreachable_domains:
            print(domain)
    else:
        print("All domains are reachable.")

if __name__ == "__main__":
    main()